{"version":3,"sources":["../../src/pages/point-vente/point-vente.module.ts","../../src/pages/point-vente/point-vente.ts"],"names":[],"mappings":"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","file":"28.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PointVentePage } from './point-vente';\n\n@NgModule({\n  declarations: [\n    PointVentePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PointVentePage),\n  ],\n})\nexport class PointVentePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/point-vente/point-vente.module.ts","import { Component } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { ManagerProvider} from '../../providers/manager/manager';\nimport { IonicPage, NavParams, NavController, ViewController ,ModalController } from 'ionic-angular';\nimport { AppNotify } from '../../app/app-notify';\nimport { UserProvider } from '../../providers/user/user';\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\nimport * as moment from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-point-vente',\n  templateUrl: 'point-vente.html',\n})\nexport class PointVentePage {\n  pointVente:any={};\n  secteurs:any[]=[];\n  inset:boolean;\n  openAddPage:boolean\n  fetching:boolean;\n  constructor(\n    public navCtrl: NavController,\n    public storage: Storage, \n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    public notify: AppNotify,\n    public modalCtrl:ModalController,\n    public localisation:LocalisationProvider,\n    public userService:UserProvider,\n    public manager: ManagerProvider,\n    public location:LocalisationProvider\n \n    ) {\n      this.pointVente=this.navParams.get('pointVente')?this.navParams.get('pointVente'):{}\n      this.inset=this.navParams.get('inset');\n      if(!this.pointVente.secteur)\n          this.pointVente.secteur=this.userService.user.secteur;\n      if(this.pointVente.secteur)\n        this.pointVente.secteur=this.pointVente.secteur.id;\n        if(!this.pointVente.date)\n          this.pointVente.date= moment().format(\"YYYY-MM-DD\");\n       //\n    }\n\n  getCurrentPosition($ev){\n    if(!this.pointVente.atnow)\n       return;\n    this.fetching=true;\n    this.location.getCurrentPosition().then((resp) => {\n      this.pointVente.lat = resp.coords.latitude;\n      this.pointVente.long = resp.coords.longitude;\n      this.fetching=false;\n    }).catch((error) => {\n      this.fetching=false;\n      console.log(error);\n    });\n  }\n\n  ionViewDidLoad() { \n    this.manager.get('secteur').then(data=>{\n      this.secteurs=data?data:[]\n      if(this.pointVente.secteur&&this.pointVente.secteur.id)\n      this.pointVente.secteur=this.pointVente.secteur.id;        \n    },error=>{\n      this.notify.onError({message:\" Verifiez votre connexion internet\"})\n    })  \n  }\n\n  select(){\n    let modal=this.modalCtrl.create('QuartiersPage',{ville:this.pointVente.ville});\n    modal.onDidDismiss(data => {\n          this.pointVente.quartier=data;\n     });\n     modal.present();\n  }\n\nisInvalid():boolean {\n  return (!this.pointVente.nom||!this.pointVente.adresse||!this.pointVente.telephone||(this.pointVente.atnow&&(!this.pointVente.lat||!this.pointVente.long)));\n}\n\ndismiss(data?:any) {\n      this.viewCtrl.dismiss(data);\n  } \n\n\nonSubmit(){\n      this.pointVente.change=true;\n       let self=this;\n      let loader= this.notify.loading({\n      content: \"Enregistrement...\",\n    }); \n  this.manager.save('pointvente',this.pointVente,this.localisation.isOnline()).then((data)=>{\n    loader.dismiss().then(()=>{\n      if(!data.error){\n        self.dismiss(data);\n        return  this.notify .onSuccess({message:\"Enregistrement effectuÃ©\"})\n      }\n      this.notify.onError({message:\"Une erreur s'est produite\"})\n\n     });  \n    \n  },error=>{\n    loader.dismiss()\n    this.notify.onError({message:\"Un probleme est survenu\"})\n  })\n    loader.present();\n\n}\n\ndeleteItem(){\n  let self=this;\n  this.notify.showAlert({\n    title:\"Suppression\",\n    message:\"Voulez-vous supprimer cet element ?\",\n    buttons: [\n      {\n        text: 'Annuler',\n        handler: () => {\n          console.log('Disagree clicked');\n        }\n      },\n      {\n        text: 'Supprimer',\n        handler: (data) => {\n                  let loader= this.notify.loading({\n                 content: \"Suppression...\",\n                     }); \n          this.manager.delete('pointvente',this.pointVente).then(data=>{\n            if(data.ok){\n              loader.dismiss().then(()=>{\n                self.dismiss(data);\n                 this.notify.onSuccess({message:\"Element supprime\"})\n               });\n            }else{\n                loader.dismiss()\n               this.notify.onError({message:\"Cet element est lie a d'autres. Vous ne pouvez pas le supprimer\"})\n            }\n          },error=>{\n              loader.dismiss()\n            this.notify.onError({message:\"Un probleme est survenu\"})\n          })\n            loader.present();\n        }\n      }\n    ]\n  })\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/point-vente/point-vente.ts"],"sourceRoot":""}