{"version":3,"sources":["../../src/pages/price-detail/price-detail.module.ts","../../src/pages/price-detail/price-detail.ts"],"names":[],"mappings":"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","file":"24.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PriceDetailPage } from './price-detail';\n\n@NgModule({\n  declarations: [\n    PriceDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PriceDetailPage),\n  ],\n})\nexport class PriceDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/price-detail/price-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,ModalController } from 'ionic-angular';\nimport { ManagerProvider} from '../../providers/manager/manager';\nimport { AppNotify } from '../../app/app-notify';\n/**\n * Generated class for the PriceDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-price-detail',\n  templateUrl: 'price-detail.html',\n})\nexport class PriceDetailPage {\n  price:any\n  payement:any={duree:\"1\"};\n  oneMonth:any;\n  sixMonth:any;\n  twelveMonth:any;\n  constructor(\n    public modalCtrl: ModalController,\n    public navCtrl: NavController,\n    public notify: AppNotify,\n    public manager: ManagerProvider,\n     public navParams: NavParams) {\n    this.price=this.navParams.get('price');\n    if(!this.price)\n      return\n    this.payement.price=this.price.id;\n  }\n\n  ionViewDidLoad() {\n      this.initPayement();\n  }\n  dismiss(skippecheck=true){\n    this.navCtrl.setRoot('TabsPage', {skippecheck:true}, {animate: true, direction: 'forward'}); \n  }\n\n  openUrl(){\n   const ch= this.manager.getObservable('payement',this.payement.cmd).subscribe(data=>{\n      if(data.json()&&data.json().status&&data.json().status=='SUCCESS') {\n        ch.unsubscribe();\n       this.dismiss(false);\n      }else if(data.json()&&data.json().status&&data.json().status=='FAILED'||!data){\n          ch.unsubscribe();\n        return this.notify.onError({ message: \"Le prelevement n'a pas put etre effectue\" });\n      }\n       \n    }, error => {\n      this.notify.onError({ message: 'Un problÃ¨me est survenu. verifiez votre connexion internet' });\n})\n    // open this.payement.url\n  }\n\n  help(){\n  let modal=  this.modalCtrl.create('HelpPage',{page:'om'})\n  modal.present();\n    //this.navCtrl.push('HelpPage',{page:'om'})\n  }\n  amount(){\n    switch (Number(this.payement.duree)) {\n      case 1:\n        this.payement.cmd=this.oneMonth.cmd\n        this.payement.url=this.oneMonth.payment_url;\n        this.payement.amount= this.price.amount;\n      break;\n      case 6:\n        this.payement.cmd=this.sixMonth.cmd\n        this.payement.url=this.sixMonth.payment_url;\n        this.payement.amount= this.price.amount*5; \n      break;     \n      default:\n        this.payement.cmd=this.twelveMonth.cmd\n        this.payement.url=this.twelveMonth.payment_url;\n        this.payement.amount=this.price.amount*10; \n      break; \n    }\n  }\n  public initPayement($event=null){\n      if(!this.price)\n      return\n    this.payement.amount=undefined;\n    if (\n       Number(this.payement.duree)==1&&this.oneMonth||\n       Number(this.payement.duree)==6&&this.sixMonth||\n       Number(this.payement.duree)==12&&this.twelveMonth\n      ) \n          return this.amount();\n    this.manager.post('payement',this.payement,'new',true).then(data=>{     \n      if(!data.payment_url)\n        return  this.notify.onError({message:\"Le paiement est momentanement indisponible. Reessayez plus tard\"})\n        switch (data.duree) {\n          case 1:\n            this.oneMonth=data;\n            break;\n          case 6:\n          this.sixMonth=data;\n            break;      \n          default:\n          this.twelveMonth=data;\n            break;\n        }\n        return this.amount(); \n },error=>{\n   this.notify.onError({message:\"PROBLEME ! Verifiez votre connexion internet\"})\n })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/price-detail/price-detail.ts"],"sourceRoot":""}