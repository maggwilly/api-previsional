{"version":3,"sources":["../../src/pages/produits/produits.module.ts","../../src/pages/produits/produits.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProduitsPage } from './produits';\n\n@NgModule({\n  declarations: [\n    ProduitsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProduitsPage),\n  ],\n})\nexport class ProduitsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/produits/produits.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController ,ModalController, Events} from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { ManagerProvider } from '../../providers/manager/manager';\nimport { AppNotify } from '../../app/app-notify';\nimport { LocalisationProvider } from '../../providers/localisation/localisation';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-produits',\n  templateUrl: 'produits.html',\n})\nexport class ProduitsPage {\n  produits: any[] = []\n  queryText = '';\n  openAddPage:boolean\n  loading:boolean=false;\n  constructor(\n    public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public manager: ManagerProvider,\n    public localisation:LocalisationProvider,\n    public events: Events,\n    public loadingCtrl: LoadingController,\n    public notify: AppNotify,\n    public storage: Storage) {\n      this.openAddPage=this.navParams.get('openAddPage')\n      this.events.subscribe('loaded:produit:new',()=>{\n      //  this.loadData();\n       })\n  }\n\n  ionViewDidLoad() {\n    if(this.openAddPage)\n       this.add()\n    this.loadData(true)\n  }\n\n  loadData(onlineIfEmpty?:boolean){  \n    this.loading=true;  \n    this.manager.get('produit',this.localisation.isOnline()).then(data=>{\n      this.produits=data?data:[]  \n      this.loading=false;\n      if(onlineIfEmpty&&(!data||data.length))\n      return this.loadRemoteData(); \n    },error=>{\n      this.notify.onError({message:\" Verifiez votre connexion internet\"})\n    })\n\n  }\n\n  loadRemoteData(){\n    let loader= this.notify.loading({\n      content: \"chargement...\",\n    });    \n    this.loading=true;  \n    this.manager.get('produit',this.localisation.isOnline()).then(data=>{\n      this.produits=data?data:[]\n      this.loading=false;\n      loader.dismiss();     \n    },error=>{\n      loader.dismiss();   \n      this.notify.onError({message:\"Verifiez votre connexion internet\"})\n    })\n    loader.present();\n  }\n \n  add(produit={}){\n    let modal=  this.modalCtrl.create('ProduitPage',{produit:produit})\n   modal.onDidDismiss(data=>{\n    console.log(data);\n    let index=-1;\n    if(!data)\n    return\n    if(data&&data.deletedId||data.id){\n      index= this.produits.findIndex(item=>item.id==data.deletedId||item.id==data.id);\n       if(index>-1)\n      this.produits.splice(index,1);\n      this.produits.splice(0,0,data); \n    }\n   }) \n   modal.present()\n }\n  search() {\n    let queryText = this.queryText.toLowerCase().replace(/,|\\.|-/g, ' ');\n    let queryWords = queryText.split(' ').filter(w => !!w.trim().length);\n    this.produits.forEach(item => {\n      item.hide = true;\n      this.filter(item, queryWords);\n    });\n\n  }\n  filter(item, queryWords) {\n    let matchesQueryText = false;\n    if (queryWords.length) {\n      // of any query word is in the session name than it passes the query test\n      queryWords.forEach(queryWord => {\n        if (item.nom.toLowerCase().indexOf(queryWord) > -1) {\n          matchesQueryText = true;\n        }\n      });\n    } else {\n      // if there are no query words then this session passes the query test\n      matchesQueryText = true;\n    }\n    item.hide = !(matchesQueryText);\n  }\n\n  doScroll(env){\n\n  }     \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/produits/produits.ts"],"sourceRoot":""}